<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>–•–∞–π–ø</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: #121212;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            padding: 20px 20px 0 20px;
        }

        /* –ó–∞—Å—Ç–∞–≤–∫–∞ */
        .splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #121212;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeOut 1.5s ease forwards 1.5s; /* –∑–∞–¥–µ—Ä–∂–∫–∞ 1.5—Å, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 1.5—Å */
            pointer-events: none;
        }
        .splash-logo {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: scaleIn 0.5s ease;
        }
        @keyframes scaleIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes fadeOut {
            0% { opacity: 1; visibility: visible; }
            100% { opacity: 0; visibility: hidden; }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-shrink: 0;
            gap: 10px;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .logo {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .beta-badge {
            font-size: 16px;
            color: #b3b3b3;
            white-space: nowrap;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }
        .balance {
            background: #2a2a2a;
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 18px;
            white-space: nowrap;
        }
        .streak {
            background: #2a2a2a;
            color: #ff8c00;
            padding: 12px 20px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }
        .page-title {
            font-size: 32px;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            letter-spacing: -0.5px;
        }
        .pages-container {
            flex: 1;
            min-height: 0;
            overflow-y: auto;
            padding-bottom: 90px;
            scrollbar-width: thin;
            scrollbar-color: #1DB954 #2a2a2a;
        }
        .pages-container::-webkit-scrollbar {
            width: 4px;
        }
        .pages-container::-webkit-scrollbar-track {
            background: #2a2a2a;
        }
        .pages-container::-webkit-scrollbar-thumb {
            background: #1DB954;
            border-radius: 2px;
        }
        .page {
            display: none;
        }
        .page.active-page {
            display: block;
        }
        @keyframes fadeSlideUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .pulse {
            animation: pulse 0.2s ease;
        }

        /* –ó–∞–¥–∞–Ω–∏—è */
        .task {
            background: #2f2f2f;
            color: white;
            border-radius: 20px;
            padding: 20px;
            margin: 12px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .task:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        .task-info {
            flex: 1;
            min-width: 0;
        }
        .task-info h3 {
            margin: 0 0 4px;
            font-size: 20px;
            font-weight: 600;
            color: white;
            word-break: break-word;
        }
        .task-info p {
            margin: 0;
            color: #b3b3b3;
            font-size: 16px;
            word-break: break-word;
        }
        .task-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }
        .task-price {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            font-size: 24px;
            font-weight: 700;
            white-space: nowrap;
        }
        .take-btn {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s, box-shadow 0.2s;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .take-btn:hover {
            opacity: 0.9;
            box-shadow: 0 6px 12px rgba(29, 185, 84, 0.4);
        }
        .take-btn:active {
            transform: scale(0.98);
        }
        .done-btn {
            background: white !important;
            color: transparent !important;
            border: none;
            border-radius: 30px;
            padding: 10px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: default;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        .done-btn::before {
            content: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 28px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            animation-delay: 0.05s;
        }
        .profile-avatar {
            width: 80px;
            height: 80px;
background: linear-gradient(135deg, #1DB954, #0A5C2A);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 600;
            color: #121212;
            text-transform: uppercase;
            border: 3px solid transparent;
            background-clip: padding-box;
            position: relative;
            flex-shrink: 0;
        }
        .profile-avatar::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            z-index: -1;
        }
        .profile-name {
            font-size: 28px;
            font-weight: 700;
            color: white;
            word-break: break-word;
        }
        .profile-stats {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .stat-card {
            background: #2f2f2f;
            color: white;
            border-radius: 20px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.15s; }
        .stat-card:nth-child(3) { animation-delay: 0.2s; }
        .stat-card:nth-child(4) { animation-delay: 0.25s; }
        .stat-content {
            flex: 1;
        }
        .stat-label {
            font-size: 16px;
            color: #b3b3b3;
            margin-bottom: 6px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: 600;
            color: white;
        }
        .progress-bar {
            background: #3e3e3e;
            height: 8px;
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #1DB954, #0A5C2A);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* –†–µ—Ñ–µ—Ä–∞–ª—ã */
        .referral-link-card {
            background: #2f2f2f;
            color: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 24px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            animation-delay: 0.1s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .referral-link-label {
            font-size: 16px;
            color: #b3b3b3;
            margin-bottom: 12px;
        }
        .referral-link-field {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .referral-link-input {
            flex: 1;
            min-width: 0;
            padding: 14px;
            border: 1px solid #3e3e3e;
            border-radius: 40px;
            font-size: 16px;
            background: #121212;
            color: white;
            outline: none;
            transition: border-color 0.2s;
        }
        .referral-link-input:focus {
            border-color: #1DB954;
        }
        .referral-copy-btn {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            color: white;
            border: none;
            border-radius: 40px;
            padding: 14px 28px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: opacity 0.2s, box-shadow 0.2s;
            flex-shrink: 0;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .referral-copy-btn:hover {
            opacity: 0.9;
            box-shadow: 0 6px 12px rgba(29, 185, 84, 0.4);
        }
        .referral-copy-btn:active {
            transform: scale(0.98);
}
        .referral-stats {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .referral-stat-card {
            background: #2f2f2f;
            color: white;
            border-radius: 20px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .referral-stat-card:nth-child(1) { animation-delay: 0.15s; }
        .referral-stat-card:nth-child(2) { animation-delay: 0.2s; }
        .referral-stat-content {
            flex: 1;
        }
        .referral-stat-label {
            font-size: 16px;
            color: #b3b3b3;
            margin-bottom: 6px;
        }
        .referral-stat-value {
            font-size: 24px;
            font-weight: 600;
            color: white;
        }

        /* –í—ã–≤–æ–¥ */
        .withdraw-balance-info {
            background: #2f2f2f;
            color: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 28px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            animation-delay: 0.05s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .withdraw-form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        .withdraw-field {
            position: relative;
            margin-top: 10px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
        }
        .withdraw-field:nth-child(1) { animation-delay: 0.1s; }
        .withdraw-field:nth-child(2) { animation-delay: 0.15s; }
        .withdraw-field input {
            width: 100%;
            padding: 16px 0 6px 0;
            border: none;
            border-bottom: 1px solid #3e3e3e;
            background: transparent;
            color: white;
            font-size: 18px;
            outline: none;
            transition: border-color 0.2s;
        }
        .withdraw-field input:focus {
            border-bottom-color: #1DB954;
        }
        .withdraw-field input::placeholder {
            color: #6a6a6a;
            font-size: 16px;
            transition: all 0.2s;
        }
        .withdraw-field input:focus::placeholder {
            transform: translateY(-12px);
            font-size: 14px;
            color: #b3b3b3;
        }
        .withdraw-btn {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 18px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s, box-shadow 0.2s;
            width: 100%;
            margin-top: 24px;
            animation: fadeSlideUp 0.5s ease forwards;
            opacity: 0;
            animation-delay: 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .withdraw-btn:hover {
            opacity: 0.9;
            box-shadow: 0 6px 12px rgba(29, 185, 84, 0.4);
        }
        .withdraw-btn:active {
            transform: scale(0.98);
        }
        .withdraw-note {
            margin-top: 18px;
            color: #b3b3b3;
            text-align: center;
            font-size: 16px;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #0a0a0a;
            display: flex;
            justify-content: space-around;
            padding: 14px;
            z-index: 100;
            border-top: 1px solid #1e1e1e;
        }
        .nav-item {
            color: #6a6a6a;
            text-decoration: none;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
gap: 6px;
            cursor: pointer;
            transition: color 0.2s;
            position: relative;
        }
        .nav-item.active {
            color: #1DB954;
        }
        .nav-item.active::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 4px;
            background: linear-gradient(90deg, #1DB954, #0A5C2A);
            border-radius: 2px;
        }
        .nav-item.active span {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        .nav-item svg {
            width: 32px;
            height: 32px;
            display: block;
        }
        .nav-item svg path,
        .nav-item svg circle,
        .nav-item svg polygon {
            fill: currentColor;
            stroke: currentColor;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(3px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1000;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: #2a2a2a;
            width: 90%;
            max-width: 440px;
            border-radius: 28px;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal.show .modal-content {
            transform: scale(1);
        }
        .modal-header {
            background: #1e1e1e;
            padding: 24px;
            text-align: right;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #b3b3b3;
        }
        .modal-body {
            padding: 24px;
            color: white;
        }
        .modal-body h3 {
            font-size: 24px;
            margin-bottom: 12px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä—ã */
        .game-boxes {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .game-box {
            background: linear-gradient(135deg, #1DB954, #0A5C2A);
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .game-box:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(29, 185, 84, 0.4);
        }
        .game-box:active {
            transform: scale(0.95);
        }
        .game-box.disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        .game-message {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            color: #b3b3b3;
        }
        .game-reward {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            color: #1DB954;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 480px) {
            .balance, .streak {
                font-size: 14px;
                padding: 8px 12px;
            }
            .game-box {
                width: 70px;
                height: 70px;
                font-size: 28px;
}
        }
        @media (max-width: 360px) {
            .logo { font-size: 28px; }
            .beta-badge { font-size: 14px; }
            .balance, .streak {
                font-size: 13px;
                padding: 6px 10px;
            }
            .task-info h3 { font-size: 18px; }
            .task-price, .task-actions .take-btn { font-size: 14px; padding: 8px 16px; }
            .game-box {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="splash" id="splash">
        <div class="splash-logo">–•–ê–ô–ü</div>
    </div>

    <div class="header">
        <div class="header-left">
            <span class="logo">–•–ê–ô–ü</span>
            <span class="beta-badge">[–±–µ—Ç–∞ —Ç–µ—Å—Ç]</span>
        </div>
        <div class="header-right">
            <div class="streak" id="streak">üî• 0</div>
            <div class="balance" id="balance">0 ‚ÇΩ</div>
        </div>
    </div>

    <div class="pages-container">
        <div id="tasks-page" class="page active-page">
            <div class="page-title">–ó–∞–¥–∞–Ω–∏—è</div>
            <div id="tasks"></div>
        </div>

        <div id="profile-page" class="page">
            <div class="page-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar"></div>
                <div class="profile-name" id="profileName"></div>
            </div>
            <div class="profile-stats" id="profileStats"></div>
        </div>

        <div id="referrals-page" class="page">
            <div class="page-title">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
            <div id="referralsContent"></div>
        </div>

        <div id="withdraw-page" class="page">
            <div class="page-title">–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</div>
            <div class="withdraw-info" id="withdrawContent"></div>
        </div>
    </div>

    <!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
    <div class="nav">
        <a class="nav-item active" data-page="tasks">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M22.0002 5H25.0002C25.5302 5.00153 26.038 5.21274 26.4128 5.58748C26.7875 5.96222 26.9987 6.47004 27.0002 7V18H25.0002V7H22.0002V10H10.0002V7H7.00024V28H16.0002V30H7.00024C6.47028 29.9985 5.96246 29.7873 5.58772 29.4125C5.21298 29.0378 5.00177 28.53 5.00024 28V7C5.00177 6.47004 5.21298 5.96222 5.58772 5.58748C5.96246 5.21274 6.47028 5.00153 7.00024 5H10.0002V4C10.0018 3.47004 10.213 2.96222 10.5877 2.58748C10.9625 2.21274 11.4703 2.00153 12.0002 2H20.0002C20.5302 2.00153 21.038 2.21274 21.4128 2.58748C21.7875 2.96222 21.9987 3.47004 22.0002 4V5ZM12.0002 8H20.0002V4H12.0002V8ZM19.4102 24.5898L22.0002 27.1798L28.5902 20.5898L30.0002 21.9998L22.0002 29.9998L18.0002 25.9998L19.4102 24.5898Z"/>
            </svg>
            <span>–ó–∞–¥–∞–Ω–∏—è</span>
        </a>
        <a class="nav-item" data-page="profile">
            <svg width="32" height="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12,11A5,5,0,1,0,7,6,5.006,5.006,0,0,0,12,11Zm0-8A3,3,0,1,1,9,6,3,3,0,0,1,12,3ZM3,22V18a5.006,5.006,0,0,1,5-5h8a5.006,5.006,0,0,1,5,5v4a1,1,0,0,1-2,0V18a3,3,0,0,0-3-3H8a3,3,0,0,0-3,3v4a1,1,0,0,1-2,0Z"/>
            </svg>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
        <a class="nav-item" data-page="referrals">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                <path d="M26.375 14.976c1.164-1.395 1.852-3.297 1.852-5.325 0-4.19-2.913-7.6-6.492-7.6-2.484 0-4.644 1.641-5.735 4.046-1.09-2.405-3.251-4.047-5.734-4.047-3.58 0-6.492 3.41-6.492 7.601 0 2.033.686 3.932 1.851 5.325C3.589 15.933 0 17.729 0 23.134v1.995h6.124c-.245.813-.39 1.747-.39 2.826v1.995H26.265v-1.995c0-1.08-.145-2.013-.39-2.826H32v-1.995c0-5.405-3.589-7.2-5.625-8.158zm-19.32 8.158h-5.06c0-6.006 5.274-6.004 6.445-7.574l.134-.716C6.929 14.01 5.768 12 5.768 9.65c0-3.096 2.014-5.606 4.498-5.606 1.759 0 3.278 1.262 4.016 3.098-2.749.884-4.775 3.834-4.775 7.328 0 2.033.687 3.932 1.852 5.325-1.247.586-3.074 1.488-4.305 3.338zm9.003 4.821h-8.33c0-6.006 5.275-6.004 6.445-7.575l.134-.716c-1.644-.834-2.805-2.842-2.805-5.193 0-3.096 2.014-5.606 4.498-5.606 2.483 0 4.497 2.51 4.497 5.606 0 2.33-1.14 4.327-2.763 5.173l.153.814c1.284 1.495 6.383 1.592 6.383 7.497h-8.212zm8.886-4.82c-1.23-1.85-3.058-2.752-4.304-3.338 1.164-1.396 1.852-3.298 1.852-5.326 0-3.494-2.026-6.443-4.774-7.328.738-1.836 2.257-3.098 4.017-3.098 2.483 0 4.497 2.51 4.497 5.606 0 2.33-1.14 4.326-2.763 5.173l.153.814c1.284 1.494 6.383 1.592 6.383 7.496z"/>
            </svg>
            <span>–†–µ—Ñ–µ—Ä–∞–ª—ã</span>
        </a>
        <a class="nav-item" data-page="withdraw">
            <svg height="32" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg">
                <path d="m29 4h-7v-1a3 3 0 0 0 -3-3h-6a3 3 0 0 0 -3 3v1h-7a3 3 0 0 0 -3 3v8a1 1 0 0 0 .74 1h.26v9a3 3 0 0 0 3 3h4a10 10 0 0 0 16 0h4a3 3 0 0 0 3-3v-9l.26-.06a1 1 0 0 0 .74-.94v-8a3 3 0 0 0 -3-3zm-17-1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v1h-8zm-10 4a1 1 0 0 1 1-1h26a1 1 0 0 1 1 1v7.23l-6.12 1.63a10 10 0 0 0 -15.76 0l-6.12-1.63zm2 19a1 1 0 0 1 -1-1v-8.43l4 1.06a9.91 9.91 0 0 0 -.16 8.37zm12 4a8 8 0 1 1 8-8 8 8 0 0 1 -8 8zm13-5a1 1 0 0 1 -1 1h-2.84a9.91 9.91 0 0 0 -.16-8.37l4-1.06z"/>
                <path d="m16 19h2a1 1 0 0 0 0-2h-1a1 1 0 0 0 -2 0v.18a3 3 0 0 0 1 5.82 1 1 0 0 1 0 2h-2a1 1 0 0 0 0 2h1a1 1 0 0 0 2 0v-.18a3 3 0 0 0 -1-5.82 1 1 0 0 1 0-2z"/>
            </svg>
            <span>–í—ã–≤–æ–¥</span>
        </a>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ò -->
    <div class="modal" id="refModal">
        <div class="modal-content">
            <div class="modal-header"><button class="modal-close" id="closeRef">&times;</button></div>
            <div class="modal-body">
                <h3>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞</h3>
                <p style="color:#b3b3b3;">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ –≤ –•–∞–π–ø. –ö–æ–≥–¥–∞ –æ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, —Ç—ã –ø–æ–ª—É—á–∏—à—å –±–æ–Ω—É—Å 30 ‚ÇΩ.</p>
                <input class="ref-link" id="refLink" readonly>
                <button class="copy-btn" id="copyBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            </div>
        </div>
    </div>

    <div class="modal" id="subModal">
        <div class="modal-content">
            <div class="modal-header"><button class="modal-close" id="closeSub">&times;</button></div>
            <div class="modal-body">
                <h3>–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª</h3>
                <p style="color:#b3b3b3;">–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ @HYPE_JOB1 –∏ –Ω–∞–∂–º–∏ –ø—Ä–æ–≤–µ—Ä–∫—É</p>
                <button class="check-btn" id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                <div class="result" id="checkResult"></div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –î–õ–Ø –ò–ì–†–´ -->
    <div class="modal" id="gameModal">
        <div class="modal-content">
            <div class="modal-header"><button class="modal-close" id="closeGame">&times;</button></div>
            <div class="modal-body">
                <h3>–ú–∏–Ω–∏-–∏–≥—Ä–∞</h3>
                <p style="color:#b3b3b3;">–í—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∏–∑ –∫–æ—Ä–æ–±–æ–∫ –∏ –≤—ã–∏–≥—Ä–∞–π 5, 10 –∏–ª–∏ 20 ‚ÇΩ!</p>
                <div class="game-boxes">
                    <div class="game-box" data-box="1">üéÅ</div>
                    <div class="game-box" data-box="2">üéÅ</div>
                    <div class="game-box" data-box="3">üéÅ</div>
                </div>
                <div class="game-message" id="gameMessage">–ù–∞–∂–º–∏ –Ω–∞ –∫–æ—Ä–æ–±–∫—É</div>
                <div class="game-reward" id="gameReward"></div>
            </div>
        </div>
    </div>

    <script>
        // –£–±–∏—Ä–∞–µ–º –∑–∞—Å—Ç–∞–≤–∫—É –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        document.getElementById('splash').addEventListener('animationend', function(e) {
            if (e.animationName === 'fadeOut') this.remove();
        });

        let tg = window.Telegram?.WebApp;
        if (tg) tg.expand();
        const userId = tg?.initDataUnsafe?.user?.id || 'test_' + Math.random();
        const userName = tg?.initDataUnsafe?.user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';

        let counts = JSON.parse(localStorage.getItem('counts')) || {};
let balance = parseInt(localStorage.getItem('balance')) || 0;
        document.getElementById('balance').innerText = balance + ' ‚ÇΩ';

        // ---------- STREAK ----------
        function getStreak() {
            return parseInt(localStorage.getItem('streak')) || 0;
        }
        function getLastStreakDate() {
            return localStorage.getItem('lastStreakDate');
        }
        function updateStreak() {
            const today = new Date().toDateString();
            const lastDate = getLastStreakDate();
            let streak = getStreak();
            if (lastDate === today) return streak;
            const yesterday = new Date(Date.now() - 86400000).toDateString();
            if (lastDate === yesterday) streak++;
            else streak = 1;
            localStorage.setItem('streak', streak);
            localStorage.setItem('lastStreakDate', today);
            return streak;
        }
        function updateStreakDisplay() {
            document.getElementById('streak').innerHTML = 'üî• ' + getStreak();
        }

        // ---------- –†–ï–ô–¢–ò–ù–ì ----------
        function getRating() {
            return parseInt(localStorage.getItem('rating')) || 0;
        }
        function addRating(points = 10) {
            let rating = getRating() + points;
            localStorage.setItem('rating', rating);
            return rating;
        }
        function getLevel(rating) {
            return Math.floor(rating / 100) + 1;
        }
        function getProgressToNextLevel(rating) {
            const level = getLevel(rating);
            const currentLevelStart = (level - 1) * 100;
            let progress = ((rating - currentLevelStart) / 100) * 100;
            progress = Math.min(100, Math.max(0, progress));
            return progress;
        }

        function saveBalance() {
            localStorage.setItem('balance', balance);
        }

        function addCount(id) {
            let key = id + '_' + new Date().toDateString();
            counts[key] = (counts[key] || 0) + 1;
            localStorage.setItem('counts', JSON.stringify(counts));
        }

        function canDo(id) {
            let key = id + '_' + new Date().toDateString();
            // –î–ª—è –º–∏–Ω–∏-–∏–≥—Ä—ã (id=3) –º–∞–∫—Å–∏–º—É–º 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å, –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 3
            if (id === 3) {
                return !counts[key] || counts[key] < 1;
            }
            return !counts[key] || counts[key] < 3;
        }

        function getTodayCount() {
            const today = new Date().toDateString();
            let total = 0;
            for (let key in counts) {
                if (key.includes(today)) total += counts[key];
            }
            return total;
        }

        function pulseIcon(item) {
            const svg = item.querySelector('svg');
            if (svg) {
                svg.classList.add('pulse');
                setTimeout(() => svg.classList.remove('pulse'), 200);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–¥–∞–Ω–∏–π
        function updateTasksPage() {
            const container = document.getElementById('tasks');
            container.innerHTML = '';
            const tasks = [
                { id: 1, name: '–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞', desc: '–û—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É', price: 30 },
                { id: 2, name: '–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª', desc: '@HYPE_JOB1', price: 20 },
                { id: 3, name: '–ú–∏–Ω–∏-–∏–≥—Ä–∞', desc: 'üéÅ –í—ã–∏–≥—Ä–∞–π –¥–æ 20 ‚ÇΩ', price: '5-20' }
            ];
            tasks.forEach((t, index) => {
                const div = document.createElement('div');
                div.className = 'task';
                div.style.animationDelay = (0.1 + index * 0.1) + 's';

                const infoDiv = document.createElement('div');
                infoDiv.className = 'task-info';
                const h3 = document.createElement('h3');
                h3.innerText = t.name;
                const p = document.createElement('p');
                p.innerText = t.desc;
                infoDiv.appendChild(h3);
                infoDiv.appendChild(p);

                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'task-actions';
                const priceSpan = document.createElement('span');
                priceSpan.className = 'task-price';
                priceSpan.innerText = (typeof t.price === 'number' ? t.price + ' ‚ÇΩ' : t.price + ' ‚ÇΩ');
                const btn = document.createElement('button');
                btn.setAttribute('data-id', t.id);

                if (t.id === 3 && !canDo(3)) {
                    btn.innerText = '–í—ã–ø–æ–ª–Ω–µ–Ω–æ';
                    btn.className = 'done-btn';
                    btn.disabled = true;
                } else {
                    btn.innerText = '–í–∑—è—Ç—å';
                    btn.className = 'take-btn';
                    btn.onclick = function(e) {
                        let id = parseInt(this.dataset.id);
                        if (!canDo(id)) {
                            alert('–õ–∏–º–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è');
                            return;
                        }
                        if (id === 1) {
                            let link = 'https://t.me/your_bot?start=ref_' + userId;
                            document.getElementById('refLink').value = link;
                            document.getElementById('refModal').classList.add('show');
                        } else if (id === 2) {
                            document.getElementById('subModal').classList.add('show');
                        } else if (id === 3) {
                            resetGameModal();
                            document.getElementById('gameModal').classList.add('show');
                        }
                    };
                }

                actionsDiv.appendChild(priceSpan);
                actionsDiv.appendChild(btn);
                div.appendChild(infoDiv);
                div.appendChild(actionsDiv);
                container.appendChild(div);
            });
        }

        // –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
        const gameModal = document.getElementById('gameModal');
        const closeGame = document.getElementById('closeGame');
        const gameBoxes = document.querySelectorAll('.game-box');
        const gameMessage = document.getElementById('gameMessage');
        const gameReward = document.getElementById('gameReward');

        function resetGameModal() {
            gameBoxes.forEach(box => {
                box.classList.remove('disabled');
                box.style.background = 'linear-gradient(135deg, #1DB954, #0A5C2A)';
                box.innerText = 'üéÅ';
            });
            gameMessage.innerText = '–ù–∞–∂–º–∏ –Ω–∞ –∫–æ—Ä–æ–±–∫—É';
            gameReward.innerText = '';
        }

        closeGame.onclick = () => gameModal.classList.remove('show');

        gameBoxes.forEach(box => {
            box.addEventListener('click', function(e) {
                if (this.classList.contains('disabled')) return;

                const id = 3;
                if (!canDo(id)) {
                    alert('–õ–∏–º–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è');
                    gameModal.classList.remove('show');
                    return;
                }

                const rewards = [5, 10, 20];
                const win = rewards[Math.floor(Math.random() * rewards.length)];

                this.innerText = win + ' ‚ÇΩ';
                this.style.background = '#0A5C2A';

                gameBoxes.forEach(b => b.classList.add('disabled'));

                gameMessage.innerText = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!';
                gameReward.innerText = +$;{win} ;

                balance += win;
                saveBalance();
                updateStreak();
                addRating(10);
                document.getElementById('balance').innerText = balance + ' ‚ÇΩ';
                updateStreakDisplay();
                addCount(3);

                updateTasksPage();

                setTimeout(() => gameModal.classList.remove('show'), 2000);
            });
        });

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–∞–ª–∫–∏
        document.getElementById('closeRef').onclick = () => document.getElementById('refModal').classList.remove('show');
        document.getElementById('copyBtn').onclick = () => {
            let inp = document.getElementById('refLink');
            inp.select();
            navigator.clipboard.writeText(inp.value).then(() => alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!'));
        };

        const subModal = document.getElementById('subModal');
        const closeSub = document.getElementById('closeSub');
        const checkBtn = document.getElementById('checkBtn');
        const checkResult = document.getElementById('checkResult');

        closeSub.onclick = () => subModal.classList.remove('show');

        checkBtn.onclick = async () => {
            if (!canDo(2)) {
                checkResult.style.color = 'red';
                checkResult.innerText = '–õ–∏–º–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è';
                return;
            }
            checkBtn.disabled = true;
            checkBtn.innerText = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
            checkResult.innerText = '';

            await new Promise(r => setTimeout(r, 1500));
            const success = true;

            if (success) {
                balance += 20;
                saveBalance();
                updateStreak();
                addRating(10);
                document.getElementById('balance').innerText = balance + ' ‚ÇΩ';
                updateStreakDisplay();
                addCount(2);
                checkResult.style.color = '#1DB954';
                checkResult.innerText = '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! +20 ‚ÇΩ';
                setTimeout(() => subModal.classList.remove('show'), 1500);
            } else {
                checkResult.style.color = 'red';
                checkResult.innerText = '‚ùå –ù–µ –ø–æ–¥–ø–∏—Å–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
                checkBtn.disabled = false;
                checkBtn.innerText = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É';
            }
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        const pages = {
            tasks: document.getElementById('tasks-page'),
            profile: document.getElementById('profile-page'),
            referrals: document.getElementById('referrals-page'),
            withdraw: document.getElementById('withdraw-page')
        };

        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                pulseIcon(item);
                const page = item.dataset.page;
                const targetPage = pages[page];
                const currentActive = document.querySelector('.page.active-page');
                if (!targetPage || targetPage === currentActive) return;
                if (currentActive) currentActive.classList.remove('active-page');
                targetPage.classList.add('active-page');
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
            });
        });

        function updateProfilePage() {
            const todayCount = getTodayCount();
            document.getElementById('profileName').innerText = userName;
            const avatarEl = document.getElementById('profileAvatar');
            avatarEl.innerText = (userName && userName !== '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å') ? userName.charAt(0).toUpperCase() : '?';

            const rating = getRating();
            const level = getLevel(rating);
            const progress = getProgressToNextLevel(rating);

            document.getElementById('profileStats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
                        <div class="stat-value">${balance} ‚ÇΩ</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                        <div class="stat-value">${todayCount}</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">ID</div>
<div class="stat-value">${userId}</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                        <div class="stat-value">–£—Ä–æ–≤–µ–Ω—å ${level}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%;"></div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateReferralsPage() {
            document.getElementById('referralsContent').innerHTML = `
                <div class="referral-link-card">
                    <div class="referral-link-label">–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</div>
                    <div class="referral-link-field">
                        <input class="referral-link-input" value="https://t.me/your_bot?start=ref_123456" readonly id="refLinkField">
                        <button class="referral-copy-btn" onclick="this.previousElementSibling.select(); navigator.clipboard.writeText(this.previousElementSibling.value); alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
                <div class="referral-stats">
                    <div class="referral-stat-card">
                        <div class="referral-stat-content">
                            <div class="referral-stat-label">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π</div>
                            <div class="referral-stat-value">0</div>
                        </div>
                    </div>
                    <div class="referral-stat-card">
                        <div class="referral-stat-content">
                            <div class="referral-stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –Ω–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞—Ö</div>
                            <div class="referral-stat-value">0 ‚ÇΩ</div>
                        </div>
                    </div>
                </div>
                <p class="withdraw-note">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑–µ–π</p>
            `;
        }

        function updateWithdrawPage() {
            document.getElementById('withdrawContent').innerHTML = `
                <div class="withdraw-balance-info">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: ${balance} ‚ÇΩ</div>
                <div class="withdraw-form">
                    <div class="withdraw-field">
                        <input type="number" id="withdrawAmount" placeholder="–°—É–º–º–∞ (–º–∏–Ω. 50 ‚ÇΩ)" min="50" step="10">
                    </div>
                    <div class="withdraw-field">
                        <input type="text" id="withdrawCard" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (16 —Ü–∏—Ñ—Ä)" maxlength="19">
                    </div>
                    <button class="withdraw-btn">–í—ã–≤–µ—Å—Ç–∏</button>
                </div>
                <p class="withdraw-note">–í—ã–≤–æ–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –±–µ—Ç–∞-—Ç–µ—Å—Ç–∞</p>
            `;
        }

        window.onclick = (e) => {
            if (e.target.classList.contains('modal')) e.target.classList.remove('show');
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateStreakDisplay();
        updateTasksPage();
        updateProfilePage();
        updateReferralsPage();
        updateWithdrawPage();
    </script>
</body>
</html>
